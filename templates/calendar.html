{% extends "base.html" %}

{% block title %}√âves Napt√°r - Bibliaolvas√°si Terv{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col">
        <h2><i class="bi bi-calendar3"></i> √âves Napt√°r</h2>
        <p class="text-muted">Kattints egy napra az olvasm√°ny megtekint√©s√©hez</p>
    </div>
    <div class="col-auto">
        <div class="card">
            <div class="card-body py-2 px-3">
                <strong>{{ total_read }}</strong> / 365 nap elolvasva
                <div class="progress mt-1" style="height: 8px;">
                    <div class="progress-bar bg-success" id="totalProgressBar" data-percent="{{ (total_read / 365 * 100)|round(1) }}"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Jelmagyar√°zat -->
<div class="mb-4">
    <span class="badge bg-light text-dark border me-2">
        <span class="calendar-dot"></span> Olvasand√≥
    </span>
    <span class="badge bg-success me-2">
        ‚úì Elolvasva
    </span>
    <span class="badge bg-primary me-2">
        Ma
    </span>
</div>

<!-- Napt√°r -->
<div class="row">
    {% for month in months %}
    <div class="col-md-4 col-lg-3 mb-4">
        <div class="card h-100">
            <div class="card-header bg-primary text-white text-center">
                <strong>{{ month.name }}</strong>
            </div>
            <div class="card-body p-2">
                <div class="calendar-grid">
                    {% for day in month.days %}
                    <a href="{{ url_for('bible.daily', date_str=day.date_str) }}" 
                       class="calendar-day 
                              {{ 'has-reading' if day.has_reading else 'no-reading' }}
                              {{ 'is-read' if day.is_read else '' }}
                              {{ 'is-today' if day.is_today else '' }}"
                       title="{{ day.day_number ~ '. nap' if day.day_number else day.date_str }}">
                        {{ day.day }}
                        {% if day.is_read %}
                        <span class="read-check">‚úì</span>
                        {% endif %}
                    </a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<!-- Statisztik√°k -->
<div class="card mt-4">
    <div class="card-header">
        <h5 class="mb-0"><i class="bi bi-trophy"></i> Olvas√°si rangsor</h5>
    </div>
    <div class="card-body">
        <div class="row">
            {% for stat in stats %}
            <div class="col-md-4 col-lg-3 mb-3">
                <div class="d-flex align-items-center">
                    <div class="me-3">
                        {% if loop.index == 1 %}
                        <span class="badge bg-warning text-dark fs-5">ü•á</span>
                        {% elif loop.index == 2 %}
                        <span class="badge bg-secondary fs-5">ü•à</span>
                        {% elif loop.index == 3 %}
                        <span class="badge bg-warning fs-5" style="background-color: #cd7f32 !important;">ü•â</span>
                        {% else %}
                        <span class="badge bg-light text-dark fs-5">{{ loop.index }}</span>
                        {% endif %}
                    </div>
                    <div class="flex-grow-1">
                        <strong>{{ stat.name }}</strong>
                        <div class="progress" style="height: 6px;">
                            <div class="progress-bar stat-progress" data-percent="{{ (stat.days_read * 100 // 365) }}"></div>
                        </div>
                        <small class="text-muted">{{ stat.days_read }} nap</small>
                    </div>
                </div>
            </div>
            {% else %}
            <div class="col">
                <p class="text-muted mb-0">M√©g nincs olvas√°si adat.</p>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<script>
// Progress barok sz√©less√©g√©nek be√°ll√≠t√°sa
document.addEventListener('DOMContentLoaded', function() {
    // F≈ë progress bar
    const totalBar = document.getElementById('totalProgressBar');
    if (totalBar) {
        totalBar.style.width = totalBar.dataset.percent + '%';
    }
    
    // Statisztika progress barok
    document.querySelectorAll('.stat-progress').forEach(bar => {
        bar.style.width = bar.dataset.percent + '%';
    });
});
</script>
{% endblock %}
